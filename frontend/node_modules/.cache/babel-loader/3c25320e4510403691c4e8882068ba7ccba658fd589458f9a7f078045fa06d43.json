{"ast":null,"code":"var _jsxFileName = \"/Users/stutipatel/Desktop/MERN/frontend/src/pages/CartPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { TrashIcon } from \"@heroicons/react/24/solid\";\nimport ConfirmModal from \"../components/modal/ConfirmModal\";\nimport AlertModal from \"../components/modal/AlertModal\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport { useCartContext } from \"../context/CartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { updateCart } from \"../api/cartService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CartPage() {\n  _s();\n  const {\n    user\n  } = useAuthContext();\n  const {\n    state,\n    dispatch\n  } = useCartContext();\n  const {\n    cart,\n    products\n  } = state;\n  const navigate = useNavigate();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [itemToDelete, setItemToDelete] = useState(null);\n  const [alert, setAlert] = useState({\n    message: \"\",\n    isSuccess: false\n  });\n  const [loading, setLoading] = useState(false); // Set loading to false by default\n\n  const showAlert = (message, isSuccess = false) => {\n    setAlert({\n      message,\n      isSuccess\n    });\n  };\n  function handleDelete(item) {\n    setItemToDelete(item);\n    setIsModalOpen(true);\n  }\n  function confirmDelete() {\n    dispatch({\n      type: \"REMOVE_ITEM\",\n      payload: itemToDelete\n    });\n    setIsModalOpen(false);\n    showAlert(\"Item removed from cart\", true);\n  }\n  const handleUpdateCart = async () => {\n    setLoading(true);\n    try {\n      await updateCart(cart, user.token);\n      showAlert(\"Cart updated successfully\", true);\n    } catch (error) {\n      showAlert(\"Error updating cart: \" + error.message, false);\n    } finally {\n      setLoading(false);\n    }\n  };\n  function handleCheckout() {\n    // Implement checkout functionality\n    navigate(\"/checkout\");\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-5 flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl sm:text-3xl font-light\",\n      children: \"Your Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow\",\n      children: cart.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center mt-5\",\n        children: \"Your cart is empty.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-5\",\n        children: cart.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center border-b py-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: `/assets/${products[item.product].images[0]}`,\n              alt: products[item.product].name,\n              className: \"h-16 w-16 object-cover mr-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg font-semibold\",\n                children: products[item.product].name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-secondary-gray\",\n                children: [\"Qty: \", item.quantity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-secondary-gray\",\n                children: [\"Price: $\", products[item.product].price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(item),\n            children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n              className: \"h-6 w-6 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this)]\n        }, item.product, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mt-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"py-3 px-6 rounded-md bg-primary-dark text-white flex justify-center items-center font-thin hover:bg-opacity-90\",\n        onClick: handleCheckout,\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"py-3 px-6 rounded-md bg-secondary-gray text-white flex justify-center items-center font-thin hover:bg-opacity-90\",\n        onClick: handleUpdateCart,\n        disabled: loading,\n        children: loading ? \"Updating...\" : \"Update Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(ConfirmModal, {\n      message: `Are you sure you want to remove ${itemToDelete === null || itemToDelete === void 0 ? void 0 : itemToDelete.productName}?`,\n      onConfirm: confirmDelete,\n      onCancel: () => setIsModalOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), alert.message && /*#__PURE__*/_jsxDEV(AlertModal, {\n      message: alert.message,\n      isSuccess: alert.isSuccess,\n      onClose: () => setAlert({\n        message: \"\",\n        isSuccess: false\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(CartPage, \"BpvkUjP6u310TqQJc5WIN4g+hgQ=\", false, function () {\n  return [useAuthContext, useCartContext, useNavigate];\n});\n_c = CartPage;\nexport default CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useEffect","useState","TrashIcon","ConfirmModal","AlertModal","useAuthContext","useCartContext","useNavigate","updateCart","jsxDEV","_jsxDEV","CartPage","_s","user","state","dispatch","cart","products","navigate","isModalOpen","setIsModalOpen","itemToDelete","setItemToDelete","alert","setAlert","message","isSuccess","loading","setLoading","showAlert","handleDelete","item","confirmDelete","type","payload","handleUpdateCart","token","error","handleCheckout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","src","product","images","alt","name","quantity","price","onClick","disabled","productName","onConfirm","onCancel","onClose","_c","$RefreshReg$"],"sources":["/Users/stutipatel/Desktop/MERN/frontend/src/pages/CartPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { TrashIcon } from \"@heroicons/react/24/solid\";\nimport ConfirmModal from \"../components/modal/ConfirmModal\";\nimport AlertModal from \"../components/modal/AlertModal\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport { useCartContext } from \"../context/CartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { updateCart } from \"../api/cartService\";\n\nfunction CartPage() {\n  const { user } = useAuthContext();\n  const { state, dispatch } = useCartContext();\n  const { cart, products } = state;\n  const navigate = useNavigate();\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [itemToDelete, setItemToDelete] = useState(null);\n  const [alert, setAlert] = useState({ message: \"\", isSuccess: false });\n  const [loading, setLoading] = useState(false); // Set loading to false by default\n\n  const showAlert = (message, isSuccess = false) => {\n    setAlert({ message, isSuccess });\n  };\n\n  function handleDelete(item) {\n    setItemToDelete(item);\n    setIsModalOpen(true);\n  }\n\n  function confirmDelete() {\n    dispatch({ type: \"REMOVE_ITEM\", payload: itemToDelete });\n    setIsModalOpen(false);\n    showAlert(\"Item removed from cart\", true);\n  }\n\n  const handleUpdateCart = async () => {\n    setLoading(true);\n    try {\n      await updateCart(cart, user.token);\n      showAlert(\"Cart updated successfully\", true);\n    } catch (error) {\n      showAlert(\"Error updating cart: \" + error.message, false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  function handleCheckout() {\n    // Implement checkout functionality\n    navigate(\"/checkout\");\n  }\n\n  return (\n    <div className=\"p-5 flex flex-col\">\n      <h1 className=\"text-2xl sm:text-3xl font-light\">Your Cart</h1>\n      <div className=\"flex-grow\">\n        {cart.length === 0 ? (\n          <p className=\"text-center mt-5\">Your cart is empty.</p>\n        ) : (\n          <div className=\"mt-5\">\n            {cart.map((item) => (\n              <div key={item.product} className=\"flex justify-between items-center border-b py-2\">\n                <div className=\"flex items-center\">\n                  <img src={`/assets/${products[item.product].images[0]}`} alt={products[item.product].name} className=\"h-16 w-16 object-cover mr-4\" />\n                  <div>\n                    <h2 className=\"text-lg font-semibold\">{products[item.product].name}</h2>\n                    <p className=\"text-sm text-secondary-gray\">Qty: {item.quantity}</p>\n                    <p className=\"text-sm text-secondary-gray\">Price: ${products[item.product].price}</p>\n                  </div>\n                </div>\n                <button onClick={() => handleDelete(item)}>\n                  <TrashIcon className=\"h-6 w-6 text-red-600\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n      <div className=\"flex justify-between items-center mt-5\">\n        <button\n          className=\"py-3 px-6 rounded-md bg-primary-dark text-white flex justify-center items-center font-thin hover:bg-opacity-90\"\n          onClick={handleCheckout}\n        >\n          Checkout\n        </button>\n        <button\n          className=\"py-3 px-6 rounded-md bg-secondary-gray text-white flex justify-center items-center font-thin hover:bg-opacity-90\"\n          onClick={handleUpdateCart}\n          disabled={loading}\n        >\n          {loading ? \"Updating...\" : \"Update Cart\"}\n        </button>\n      </div>\n      {isModalOpen && (\n        <ConfirmModal\n          message={`Are you sure you want to remove ${itemToDelete?.productName}?`}\n          onConfirm={confirmDelete}\n          onCancel={() => setIsModalOpen(false)}\n        />\n      )}\n      {alert.message && (\n        <AlertModal\n          message={alert.message}\n          isSuccess={alert.isSuccess}\n          onClose={() => setAlert({ message: \"\", isSuccess: false })}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default CartPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}