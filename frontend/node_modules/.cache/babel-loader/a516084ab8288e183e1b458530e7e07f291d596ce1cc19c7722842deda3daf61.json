{"ast":null,"code":"var _jsxFileName = \"/Users/stutipatel/Desktop/MERN/frontend/src/pages/CartPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { TrashIcon } from \"@heroicons/react/24/solid\";\nimport ConfirmModal from \"../components/modal/ConfirmModal\";\nimport AlertModal from \"../components/modal/AlertModal\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport { useCartContext } from \"../context/CartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { updateCart } from \"../api/cartService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CartPage() {\n  _s();\n  const {\n    user\n  } = useAuthContext();\n  const {\n    state,\n    dispatch\n  } = useCartContext();\n  const {\n    cart,\n    products\n  } = state;\n  const navigate = useNavigate();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [itemToDelete, setItemToDelete] = useState(null);\n  const [alert, setAlert] = useState({\n    message: \"\",\n    isSuccess: false\n  });\n  const [loading, setLoading] = useState(false); // Removed loading state\n\n  const showAlert = (message, isSuccess = false) => {\n    setAlert({\n      message,\n      isSuccess\n    });\n  };\n  useEffect(() => {\n    if (cart.length === 0 && user) {\n      // Navigate to product page if cart is empty\n      navigate(\"/\");\n    }\n  }, [cart, navigate, user]);\n  const confirmDelete = async () => {\n    const newCart = cart.filter(item => item.product !== itemToDelete);\n    dispatch({\n      type: \"SET_CART\",\n      payload: newCart\n    });\n\n    // Send delete request to server\n    try {\n      await updateCart(newCart, user.token);\n      showAlert(\"Item removed successfully\", true);\n    } catch (error) {\n      showAlert(error.message, false);\n    }\n    setItemToDelete(null);\n    setIsModalOpen(false);\n  };\n  const handleDelete = productId => {\n    setItemToDelete(productId);\n    setIsModalOpen(true);\n  };\n  const closeModal = () => {\n    setIsModalOpen(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-5 flex flex-col\",\n    children: [cart.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Your cart is empty\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this) : cart.map(item => {\n      const product = products.find(prod => prod._id === item.product);\n      if (!product) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Product not found\"\n        }, item.product, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 20\n        }, this); // Handle product not found\n      }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center border-b py-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: `/assets/${product.image}`,\n            alt: product.name,\n            className: \"h-16 w-16 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold\",\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500\",\n              children: [\"Qty: \", item.quantity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-semibold\",\n            children: [\"$\", product.price * item.quantity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(item.product),\n            children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n              className: \"h-6 w-6 text-red-600 ml-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }, this)]\n      }, item.product, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this);\n    }), alert.message && /*#__PURE__*/_jsxDEV(AlertModal, {\n      message: alert.message,\n      isSuccess: alert.isSuccess,\n      onClose: () => setAlert({\n        message: \"\",\n        isSuccess: false\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmModal, {\n      isOpen: isModalOpen,\n      onClose: closeModal,\n      onConfirm: confirmDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(CartPage, \"NVka0Oiu0YNCK15kizX6DWyECIM=\", false, function () {\n  return [useAuthContext, useCartContext, useNavigate];\n});\n_c = CartPage;\nexport default CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useEffect","useState","TrashIcon","ConfirmModal","AlertModal","useAuthContext","useCartContext","useNavigate","updateCart","jsxDEV","_jsxDEV","CartPage","_s","user","state","dispatch","cart","products","navigate","isModalOpen","setIsModalOpen","itemToDelete","setItemToDelete","alert","setAlert","message","isSuccess","loading","setLoading","showAlert","length","confirmDelete","newCart","filter","item","product","type","payload","token","error","handleDelete","productId","closeModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","find","prod","_id","src","image","alt","name","quantity","price","onClick","onClose","isOpen","onConfirm","_c","$RefreshReg$"],"sources":["/Users/stutipatel/Desktop/MERN/frontend/src/pages/CartPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { TrashIcon } from \"@heroicons/react/24/solid\";\nimport ConfirmModal from \"../components/modal/ConfirmModal\";\nimport AlertModal from \"../components/modal/AlertModal\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport { useCartContext } from \"../context/CartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { updateCart } from \"../api/cartService\";\n\nfunction CartPage() {\n  const { user } = useAuthContext();\n  const { state, dispatch } = useCartContext();\n  const { cart, products } = state;\n  const navigate = useNavigate();\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [itemToDelete, setItemToDelete] = useState(null);\n  const [alert, setAlert] = useState({ message: \"\", isSuccess: false });\n  const [loading, setLoading] = useState(false); // Removed loading state\n\n  const showAlert = (message, isSuccess = false) => {\n    setAlert({ message, isSuccess });\n  };\n\n  useEffect(() => {\n    if (cart.length === 0 && user) {\n      // Navigate to product page if cart is empty\n      navigate(\"/\");\n    }\n  }, [cart, navigate, user]);\n\n  const confirmDelete = async () => {\n    const newCart = cart.filter(item => item.product !== itemToDelete);\n    dispatch({ type: \"SET_CART\", payload: newCart });\n\n    // Send delete request to server\n    try {\n      await updateCart(newCart, user.token);\n      showAlert(\"Item removed successfully\", true);\n    } catch (error) {\n      showAlert(error.message, false);\n    }\n    \n    setItemToDelete(null);\n    setIsModalOpen(false);\n  };\n\n  const handleDelete = (productId) => {\n    setItemToDelete(productId);\n    setIsModalOpen(true);\n  };\n\n  const closeModal = () => {\n    setIsModalOpen(false);\n  };\n\n  return (\n    <div className=\"p-5 flex flex-col\">\n      {cart.length === 0 ? (\n        <div>Your cart is empty</div>\n      ) : (\n        cart.map(item => {\n          const product = products.find(prod => prod._id === item.product);\n          \n          if (!product) {\n            return <div key={item.product}>Product not found</div>; // Handle product not found\n          }\n  \n          return (\n            <div key={item.product} className=\"flex justify-between items-center border-b py-2\">\n              <div className=\"flex items-center\">\n                <img src={`/assets/${product.image}`} alt={product.name} className=\"h-16 w-16 mr-2\" />\n                <div>\n                  <h2 className=\"text-lg font-semibold\">{product.name}</h2>\n                  <p className=\"text-gray-500\">Qty: {item.quantity}</p>\n                </div>\n              </div>\n              <div className=\"flex items-center\">\n                <p className=\"text-lg font-semibold\">${product.price * item.quantity}</p>\n                <button onClick={() => handleDelete(item.product)}>\n                  <TrashIcon className=\"h-6 w-6 text-red-600 ml-4\" />\n                </button>\n              </div>\n            </div>\n          );\n        })\n      )}\n      {alert.message && (\n        <AlertModal\n          message={alert.message}\n          isSuccess={alert.isSuccess}\n          onClose={() => setAlert({ message: \"\", isSuccess: false })}\n        />\n      )}\n      <ConfirmModal\n        isOpen={isModalOpen}\n        onClose={closeModal}\n        onConfirm={confirmDelete}\n      />\n    </div>\n  );\n  \n}\n\nexport default CartPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}