{"ast":null,"code":"var _jsxFileName = \"/Users/stutipatel/Desktop/MERN/frontend/src/pages/ProductPage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/ProductPage.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useCartContext } from \"../context/CartContext\";\nimport { fetchProduct } from \"../api/productService\";\nimport { useAuthContext } from \"../hooks/useAuthContext\"; // Import the useAuthContext hook\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductPage() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    state,\n    dispatch\n  } = useCartContext();\n  const {\n    cart\n  } = state; // Access cart from context\n  const {\n    user\n  } = useAuthContext(); // Get user context to access token\n  const [productDetails, setProductDetails] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  useEffect(() => {\n    const loadProduct = async () => {\n      if (user) {\n        try {\n          const product = await fetchProduct(id, user.token); // Pass the token to fetchProduct\n          setProductDetails(product);\n        } catch (error) {\n          console.error(\"Error fetching product:\", error); // Log error for debugging\n          alert(\"Failed to fetch product details.\"); // Alert the user in case of an error\n        }\n      } else {\n        alert(\"User not authenticated.\"); // Alert if user is not authenticated\n      }\n    };\n    loadProduct();\n  }, [id, user]); // Add user to dependencies\n\n  const handleAddToCart = () => {\n    if (!productDetails) return; // Prevent adding if productDetails is not loaded\n    const cartItem = {\n      product: productDetails.id,\n      quantity\n    };\n    dispatch({\n      type: \"ADD_ITEM\",\n      payload: cartItem\n    });\n    alert(\"Item added to cart!\"); // Simple alert for success\n  };\n  if (!productDetails) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 33\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: productDetails.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Price: $\", productDetails.price]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: quantity,\n      onChange: e => setQuantity(Number(e.target.value)),\n      children: [...Array(9)].map((_, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: index + 1,\n        children: index + 1\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddToCart,\n      children: \"Add to Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n}\n_s(ProductPage, \"KPu6eCWFTHOfntn7gozVXMMjQJA=\", false, function () {\n  return [useParams, useCartContext, useAuthContext];\n});\n_c = ProductPage;\nexport default ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useCartContext","fetchProduct","useAuthContext","jsxDEV","_jsxDEV","ProductPage","_s","id","state","dispatch","cart","user","productDetails","setProductDetails","quantity","setQuantity","loadProduct","product","token","error","console","alert","handleAddToCart","cartItem","type","payload","children","fileName","_jsxFileName","lineNumber","columnNumber","name","price","value","onChange","e","Number","target","Array","map","_","index","onClick","_c","$RefreshReg$"],"sources":["/Users/stutipatel/Desktop/MERN/frontend/src/pages/ProductPage.jsx"],"sourcesContent":["// src/pages/ProductPage.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useCartContext } from \"../context/CartContext\";\nimport { fetchProduct } from \"../api/productService\";\nimport { useAuthContext } from \"../hooks/useAuthContext\"; // Import the useAuthContext hook\n\nfunction ProductPage() {\n    const { id } = useParams();\n    const { state, dispatch } = useCartContext();\n    const { cart } = state; // Access cart from context\n    const { user } = useAuthContext(); // Get user context to access token\n    const [productDetails, setProductDetails] = useState(null);\n    const [quantity, setQuantity] = useState(1);\n\n    useEffect(() => {\n        const loadProduct = async () => {\n            if (user) {\n                try {\n                    const product = await fetchProduct(id, user.token); // Pass the token to fetchProduct\n                    setProductDetails(product);\n                } catch (error) {\n                    console.error(\"Error fetching product:\", error); // Log error for debugging\n                    alert(\"Failed to fetch product details.\"); // Alert the user in case of an error\n                }\n            } else {\n                alert(\"User not authenticated.\"); // Alert if user is not authenticated\n            }\n        };\n\n        loadProduct();\n    }, [id, user]); // Add user to dependencies\n\n    const handleAddToCart = () => {\n        if (!productDetails) return; // Prevent adding if productDetails is not loaded\n        const cartItem = { product: productDetails.id, quantity };\n        dispatch({ type: \"ADD_ITEM\", payload: cartItem });\n        alert(\"Item added to cart!\"); // Simple alert for success\n    };\n\n    if (!productDetails) return <div>Loading...</div>;\n\n    return (\n        <div>\n            <h1>{productDetails.name}</h1>\n            <p>Price: ${productDetails.price}</p>\n            <select value={quantity} onChange={(e) => setQuantity(Number(e.target.value))}>\n                {[...Array(9)].map((_, index) => (\n                    <option key={index} value={index + 1}>{index + 1}</option>\n                ))}\n            </select>\n            <button onClick={handleAddToCart}>Add to Cart</button>\n        </div>\n    );\n}\n\nexport default ProductPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}